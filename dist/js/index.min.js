!function(){var t,e,i;!function(n){function o(t,e){return C.call(t,e)}function s(t,e){var i,n,o,s,r,a,l,c,u,d,h,m,f=e&&e.split("/"),g=b.map,p=g&&g["*"]||{};if(t){for(t=t.split("/"),r=t.length-1,b.nodeIdCompat&&E.test(t[r])&&(t[r]=t[r].replace(E,"")),"."===t[0].charAt(0)&&f&&(m=f.slice(0,f.length-1),t=m.concat(t)),u=0;u<t.length;u++)if("."===(h=t[u]))t.splice(u,1),u-=1;else if(".."===h){if(0===u||1===u&&".."===t[2]||".."===t[u-1])continue;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((f||p)&&g){for(i=t.split("/"),u=i.length;u>0;u-=1){if(n=i.slice(0,u).join("/"),f)for(d=f.length;d>0;d-=1)if((o=g[f.slice(0,d).join("/")])&&(o=o[n])){s=o,a=u;break}if(s)break;!l&&p&&p[n]&&(l=p[n],c=u)}!s&&l&&(s=l,a=c),s&&(i.splice(0,a,s),t=i.join("/"))}return t}function r(t,e){return function(){var i=x.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(n,i.concat([t,e]))}}function a(t){return function(e){return s(e,t)}}function l(t){return function(e){v[t]=e}}function c(t){if(o(y,t)){var e=y[t];delete y[t],w[t]=!0,m.apply(n,e)}if(!o(v,t)&&!o(w,t))throw new Error("No "+t);return v[t]}function u(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function d(t){return t?u(t):[]}function h(t){return function(){return b&&b.config&&b.config[t]||{}}}var m,f,g,p,v={},y={},b={},w={},C=Object.prototype.hasOwnProperty,x=[].slice,E=/\.js$/;g=function(t,e){var i,n=u(t),o=n[0],r=e[1];return t=n[1],o&&(o=s(o,r),i=c(o)),o?t=i&&i.normalize?i.normalize(t,a(r)):s(t,r):(t=s(t,r),n=u(t),o=n[0],t=n[1],o&&(i=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},p={require:function(t){return r(t)},exports:function(t){var e=v[t];return void 0!==e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:h(t)}}},m=function(t,e,i,s){var a,u,h,m,f,b,C,x=[],E=typeof i;if(s=s||t,b=d(s),"undefined"===E||"function"===E){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(m=g(e[f],b),"require"===(u=m.f))x[f]=p.require(t);else if("exports"===u)x[f]=p.exports(t),C=!0;else if("module"===u)a=x[f]=p.module(t);else if(o(v,u)||o(y,u)||o(w,u))x[f]=c(u);else{if(!m.p)throw new Error(t+" missing "+u);m.p.load(m.n,r(s,!0),l(u),{}),x[f]=v[u]}h=i?i.apply(v[t],x):void 0,t&&(a&&a.exports!==n&&a.exports!==v[t]?v[t]=a.exports:h===n&&C||(v[t]=h))}else t&&(v[t]=i)},t=e=f=function(t,e,i,o,s){if("string"==typeof t)return p[t]?p[t](e):c(g(t,d(e)).f);if(!t.splice){if(b=t,b.deps&&f(b.deps,b.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=o,o=s),o?m(n,t,e,i):setTimeout(function(){m(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=v,i=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),o(v,t)||o(y,t)||(y[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("/mnt/c/arnaud/dock/dotburo-website/node_modules/almond/almond.js",function(){}),i("d1",[],function(){"use strict";var t=window,e=t.navigator,i={scrDensity:"devicePixelRatio"in t?t.devicePixelRatio:1,isTouch:"ontouchstart"in t||e.MaxTouchPoints>0||e.msMaxTouchPoints>0};return i.debounce=function(t,e,i){var n;return function(){var o=this,s=arguments;clearTimeout(n),n=setTimeout(function(){n=null,i||t.apply(o,s)},e),i&&!n&&t.apply(o,s)}},i.parent=function(t,e){e=e.toLowerCase();do{if(t.tagName.toLowerCase()===e)return t}while(t=t.parentNode);return null},i.elementArray=function(t){return Array.prototype.slice.call(t)},i.elementIndex=function(t){for(var e=0;t=t.previousElementSibling;)e++;return e},i}),function(t,e,n){"use strict";function o(t,e,i,n){return Math.round(-i*(t/=n)*(t-2)+e)}function s(t,e){var i=0;if(t.offsetParent)do{i+=t.offsetTop}while((t=t.offsetParent)&&t.offsetParent!=e);return i}function r(){u=0}function a(i){function n(){var s=Date.now();if(u&&s<=y)return w(o(s-p,f,g,v)),void t.requestAnimationFrame(n);u&&t.requestAnimationFrame(function(){w(m-(i.offset||0))}),"function"==typeof b&&b.call(a,u),a.removeEventListener(h,r),e.body.className=e.body.className.replace(d,"")}i=i||{};var a=i.context||t,m=i.to&&1===i.to.nodeType?s(i.to,a):i.to||0,f=a[i.context?"scrollTop":"pageYOffset"],g=m-(i.offset||0)-f,p=Date.now(),v=Math.abs(g/(i.speed||c)),y=p+v,b=i.callback,w=i.context?function(t){a.scrollTop=t}:function(t){a.scrollTo(0,t)};u=1,e.body.className+=" "+l,a.addEventListener(h,r),t.requestAnimationFrame(n)}var l="auto-scrolling",c=2,u=0,d=new RegExp("(?:^|\\s)"+l+"(?!\\S)","gi"),h="ontouchstart"in t||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0?"touchstart":"onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll";"function"==typeof i&&i.amd?i("goScroll",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:window.goScroll=a}(window,document),i("app",["d1","goScroll"],function(t,e){"use strict";var i=window,n=i.document;return{util:t,initial:{},views:{},data:{},mail:["hello","dotburo","org"],resolution:Math.max(screen.width,screen.height)*t.scrDensity,hasHistory:i.history&&i.history.pushState&&void 0!==i.history.state,showingContact:0,initialize:function(t){this.initial=t,this.closeBtn=n.getElementById("btn-close"),this.contactBtn=n.getElementById("btn-contact"),this.setSizable(),this.bindHandlers(),this.load()},bindHandlers:function(){var e=this;this.closeBtn.addEventListener("click",function(t){t.preventDefault(),e.closePage(1)}),this.contactBtn.addEventListener("click",function(t){e.toggleContact(t.currentTarget),t.preventDefault()}),i.addEventListener("resize",t.debounce(function(){e.setSizable()},200))},load:function(){var t=this;"complete"===n.readyState?t.onLoad():i.addEventListener("load",function(){t.onLoad()})},onLoad:function(){var t=this;t.insertMail(),t.wWidth<=780&&(this.navMobile=n.getElementById("nav-mobile"),this.navMobile.addEventListener("click",function(e){t.shiftPages(e)}))},insertMail:function(){var t=n.getElementById("mail"),e=n.createElement("a"),i=this.mail[0]+"@"+this.mail[1]+"."+this.mail[2],o=n.createTextNode(i);e.href="mailto:"+i,e.appendChild(o),t.appendChild(e)},setHistory:function(t){t.time=(new Date).getTime(),this.resetDocument(t),this.hasHistory&&i.history.pushState(t,t.title,t.url)},handlePopState:function(t){t.time=(new Date).getTime(),this.resetDocument(t),t.id?this.views.grid.launchPage(n.getElementById(t.id),t):this.closePage(0)},resetDocument:function(t){n.title="/"===t.url?this.initial.siteTitle:t.title+" â€º_ "+this.initial.siteTitle},toggleCloseBtn:function(t,e){e&&(t=this.views.grid.activeColumn?1:0),this.closeBtn.classList[t?"remove":"add"]("hide")},closePage:function(t){this.toggleCloseBtn(0),this.views.grid.shrinkColumn(),t&&this.setHistory({id:null,title:this.initial.title,url:"/"})},toggleContact:function(t){var i,o=this;o.showingContact?(i=0,o.toggleCloseBtn(1,!0)):(i=n.getElementById("pages").clientHeight,o.toggleContactVisibility(1),this.toggleCloseBtn(0)),o.showingContact=!o.showingContact,e({to:i,speed:3,context:n.getElementById("pages"),callback:function(){o.showingContact?t.innerHTML="back":(o.toggleContactVisibility(0),t.innerHTML="contact")}})},toggleContactVisibility:function(t){n.getElementById("contact").parentNode.classList[t?"remove":"add"]("invisible")},shiftPages:function(t){var e,n=t.target;"button"===n.tagName.toLowerCase()&&(e=+n.getAttribute("data-id"),this.navMobile.querySelector(".active").classList.remove("active"),e!==this.currentPage&&(this.currentPage=e,this.toggleCloseBtn(0),this.views.grid.shrinkColumn(e+1),i.history.replaceState(this.initial,this.initial.siteTitle,"/"),this.views.grid.el.style.transform="translate3d(-"+25*e+"%,0,0)",n.classList.add("active")))},setSizable:function(){this.wWidth=i.innerWidth,this.gridWidth=this.views.grid.el.clientWidth}}}),i("templates",[],function(){return{allowImg:function(t){return t&&!/-posterframe\./.test(t)?t:null},main:function(t,e,i,n){return'<main data-slug="'+e+'"><article><header>'+(n?'<p class="title-small"><time>'+n+"</time></p>":"")+"<h2>"+t+"</h2></header>"+(this.allowImg(i)?'<img src="'+i+'" alt="'+t+'">':"")+'<div class="xhr-root"><p class="about">Loading...</p></div></article></main>'},content:function(t){var e,i,n="",o="",s=[],r=0,a="",l=t.meta&&t.meta.media?t.meta.media:[],c=l.length;for(t.content&&(n='<div class="about">'+t.content+"</div>"),r;r<c;r++){if("string"==typeof l[r].src)o='<li><img src="'+l[r].src+'" alt="'+t.meta.title+'"></li>';else{for(i=0,e=l[r].src.length;i<e;i++)a+='<source src="'+l[r].src[i].url+'" type="'+l[r].src[i].mime+'">';o='<li><video controls preload poster="'+l[r].poster+'">'+a+"</video></li>"}s.push(o)}return n+"<ul>"+s.join("")+"</ul>"}}}),i("gistHandle",[],function(){"use strict";function t(t){o["handleGist_"+t]=function(t){return function(n){i(n),e(n,t)}}(t)}function e(t,e){var i=s.querySelector('.gist[src*="'+e+'"]'),n=s.createElement("div");n.innerHTML=t.div,i.parentNode.insertBefore(n,i.nextSibling),i.parentNode.removeChild(i)}function i(t){if(t.stylesheet&&!s.querySelector('link[href="'+t.stylesheet+'"]')){var e=s.createElement("link"),i=s.getElementsByTagName("head")[0];e.type="text/css",e.rel="stylesheet",e.href=t.stylesheet,i.insertBefore(e,i.firstChild)}}function n(t){return t.split("/").pop().replace(/\.js$/,"")}var o=window,s=o.document;return o.handleGist=function(t){s.getElementsByClassName("gist")[0].innerHTML=t.div},function(e){var i=n(e),o=s.createElement("script");o.src="https://gist.github.com/"+i+".json?callback=handleGist_"+i,t(i),s.body.appendChild(o)}}),i("Page",["app","templates","gistHandle"],function(t,e,i){"use strict";var n=window,o=n.document,s=function(e,i){var n=e.el||this.getActiveItem(),o=n.id||"h"+(new Date).getTime(),s=n.getAttribute("href");e.id=n.id=o,e.slug=s,e.column=e.column||t.views.grid.getContentColumn(n),this.options=e,this.el=n,e.column.scrollTop=0,t.initial.isSingle&&t.initial.pageLoad||(this.fetch(e,i),t.toggleCloseBtn(1)),i||t.initial.pageLoad||t.setHistory({id:o,title:this.getTitle(e.el),url:s})};return s.prototype={getActiveItem:function(){var t=o.querySelector(".open main").getAttribute("data-slug"),e=o.querySelector('a.item[href="'+t+'"]');return e&&e.classList.add("active"),e},getTitle:function(t){return t.getAttribute("data-title")||t.getElementsByTagName("h2")[0].textContent},fetch:function(i,o){var s=this;if(this.options.column.innerHTML=e.main(this.el.getAttribute("data-title"),i.slug,this.el.getAttribute("data-img"),this.el.querySelector("time")?this.el.querySelector("time").textContent:null),o)return this.render(t.data[i.id]);n.fetch(i.slug.replace(/\/$/,"")+"?get").then(function(t){return t.json()}).then(function(e){t.data[i.id]=e,s.render(e)}).catch(function(t){s.render({content:'<p class="err-xhr"> Â¡NETWORK ERROR ['+t.status+"] &mdash; "+t.toString().toUpperCase()+"! </p>"})})},render:function(t){var i=this.options.column.getElementsByClassName("xhr-root")[0];i.innerHTML=e.content(t),this.evalGists(i)},evalGists:function(e){var n=e.getElementsByClassName("gist");t.util.elementArray(n).forEach(function(t){i(t.src)})},destroy:function(){this.options.column.innerHTML=""}},s}),i("Grid",["app","Page"],function(t,e){"use strict";var i=window,n=i.document,o=t.util.isTouch,s=!1,r=0,a=function(t,e){if(!s){var n=this;i.requestAnimationFrame(function(){n.showHoverImage(t,e)})}s=!0},l=function(t){var e=t.el.querySelectorAll("a.item, .blog a");this.el=t.el,this.thumb=n.getElementById("thumb"),this.activeColumn=n.querySelector(".col.open"),this.bindHandlers(e),this.onTransitionEnd("width")};return l.prototype={bindHandlers:function(t){var e=this,n=0,s=t.length,r=function(t){if("_blank"===t.currentTarget.target)return!0;t.preventDefault(),t.currentTarget.classList.contains("active")?i.history.back():(e.hideThumb(),e.launchPage(t.currentTarget))},l=function(t){a.call(e,t,this)},c=function(){e.hideThumb()};for(n;n<s;n++)t[n].addEventListener("click",r),!o&&t[n].getAttribute("data-img")&&(t[n].addEventListener("mousemove",l),t[n].addEventListener("mouseleave",c));o||e.thumb.addEventListener("mouseenter",c)},showHoverImage:function(t,e){var i=e.getAttribute("data-img");this.thumb.style.top=t.pageY+"px",this.thumb.style.left=t.pageX+"px",r!==i&&this.setThumb(i),s=!1},setThumb:function(t){r=t,this.thumb.style.display="block",this.thumb.innerHTML='<img src="'+t+'" width="150px">'},hideThumb:function(){r=0,this.thumb.style.display="none"},onTransitionEnd:function(t){var e=this;this.el.addEventListener("transitionend",function(i){i.propertyName===t&&(e.activeColumn?e.onColumnExpanded(i.target):e.onColumnShrunk(i.target))})},launchPage:function(n,o){var s=this,r=s.getContentColumn(n),a=/(blog)/.test(n.href)?"blog":r.id;switch(this.unsetActiveItem(),n.classList.add("active"),s.activeColumn=r,s.activeColumnIndex=t.util.elementIndex(r),t.views.page=new e({el:n,column:r},o),a){case"online":s.shiftGrid(r),s.expandColumn(r);break;case"offline":s.shiftGrid(r),i.setTimeout(function(){s.expandColumn(r)},250);break;case"blog":s.expandColumn(r,1),i.setTimeout(function(){s.shiftGrid(r,1)},200)}},getContentColumn:function(e){var i=t.util.parent(e,"section");return n.getElementById(i.getAttribute("data-id"))},expandColumn:function(t,e){t.classList.remove("invisible"),i.requestAnimationFrame(function(){e?t.classList.add("open","as-blog"):(t.classList.remove("as-blog"),t.classList.add("open"))})},shiftGrid:function(e,n){var o=this,s=0;if(t.wWidth>=780){switch(e.id){case"online":s=0;break;case"offline":s=n?2:1}s=Math.ceil(t.gridWidth*(11*s)/100)}else s=o.mobileGridShift();i.requestAnimationFrame(function(){o.el.style.transform="translate3d(-"+s+"px,0,0)"})},mobileGridShift:function(){var e=this.activeColumnIndex>1?this.activeColumnIndex-1:1;return Math.ceil(t.gridWidth*(25*e)/100)},onColumnExpanded:function(){this.toggleColumnVisibility(0)},shrinkColumn:function(e){var n=this,o=n.activeColumn;o&&(o.classList.remove("open"),n.unsetActiveItem(),n.toggleColumnVisibility(1),i.requestAnimationFrame(function(){var i;o.classList.remove("open"),t.wWidth>=780?n.el.style.transform="translate3d(0,0,0)":(n.activeColumnIndex=e||n.activeColumnIndex,i=1===n.activeColumnIndex?0:Math.ceil(25*t.gridWidth/100),n.el.style.transform="translate3d(-"+i+"px,0,0)"),n.activeColumn=null,n.activeColumnIndex=null}))},unsetActiveItem:function(){var t=n.querySelector("a.item.active");t&&t.classList.remove("active")},onColumnShrunk:function(e){i.requestAnimationFrame(function(){e.classList.add("invisible"),t.views.page.destroy(),delete t.views.page})},toggleColumnVisibility:function(e){var i=t.util.elementArray(n.getElementsByClassName("col")),o=this.activeColumnIndex-1,s=0;for(i.splice(o,2),s;s<i.length;s++);}},l}),function(t){"use strict";var i=t.document,n=t.location,o=n.pathname;e.config({baseUrl:"/resources/js",paths:{goScroll:"../../node_modules/go-scroll-to/goScroll",d1:"modules/d1",app:"app",templates:"modules/pageTpl",Grid:"modules/Grid",Page:"modules/Page",gistHandle:"modules/gist-handle"}}),e(["app","Grid","Page"],function(e,s,r){var a=!t.navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),l={pageLoad:1,isSingle:"/"!==o&&"/index.php"!==o&&!i.getElementsByClassName(".err-404").length,siteTitle:i.getElementById("site-title").getAttribute("content"),title:i.title,url:n.href};a&&i.body.classList.add("is-win"),i.body.classList.add(e.util.isTouch?"is-touch":"no-touch"),e.hasHistory&&(t.addEventListener("popstate",function(t){t.state&&e.handlePopState(t.state)}),t.history.replaceState(l,l.title,l.url)),e.views.grid=new s({el:i.getElementById("grid")}),e.initialize(l),l.isSingle&&(e.views.page=new r({},l),e.views.grid.shiftGrid(i.querySelector(".col.open"),/(blog)/.test(o)),e.views.grid.onColumnExpanded()),e.initial.pageLoad=0})}(window),i("index.js",function(){})}();
//# sourceMappingURL=index.min.js.map